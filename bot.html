<!DOCTYPE html>
<html>

<head>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
      width: 100%;
      border-radius: 10px;


    }

    .card {
      margin: 10px 1px 1px 5px;
      /* padding: 2em; */
      height: 90%;
      width: 95%;
      background-image: url('https://talmaashani2016.github.io/CustomScripts/2%2012.png');
      text-align: center;
      border-radius: 10px;
      position: relative;
    }

    @property --angle {
      syntax: "<angle>";
      initial-value: 0deg;
      inherits: false;
    }

    .card::after,
    .card::before {
      content: '';
      position: absolute;
      height: 100%;
      width: 100%;
      background-image: conic-gradient(from var(--angle), #ff8220, #04acbc, #1e4e52, #04acbc, #ff8220);
      top: 50%;
      left: 50%;
      translate: -50% -50%;
      z-index: -1;
      padding: 3px;
      border-radius: 10px;
      animation: 3s spin linear infinite;
    }

    .card::before {
      filter: blur(1.5rem);
      /* opacity: 0.5; */
    }

    @keyframes spin {
      from {
        --angle: 0deg;
      }

      to {
        --angle: 360deg;
      }
    }



    h1 {
      color: White;
      font-family: 'ArticualteCustom' !important;
      font-size: 24px;
      line-height: 20px;
      margin: 0;
      padding: 20px 15px 15px 15px;
    }

    @font-face {
      font-family: 'ArticualteCustom';
      /* Name for your font */
      src: url('https://github.com/talmaashani2016/CustomScripts/blob/main/ArticulatCF-Medium.otf') format('otf'),
        /* Add more font formats as needed */
    }

    #banner {
      align-items: center;
      background-color: #1e4e52;
      display: flex;
      height: 50px;
      position: relative;
      padding: 15px 30px 15px 30px;
      border-radius: 10px;

      /* margin: 15px 15px 15px 15px; */
    }

    #logo {
      margin-left: auto;
      /* Add margin to create space between image and text */
      max-width: 30%;
      /* Set a maximum width for the image */
      max-height: 50%;
      /* Adjust as needed */
      /* float: right; */
    }

    .webchat__send-box .webchat__send-box__main {
      margin-left: 50px !important;
      margin-bottom: 50px !important;
      margin-top: 20px !important;
      margin-right: 50px !important;
    }


    .webchat__icon-button__shade {
      background-color: #1e4e52;
    }

    .webchat__icon-button__shade {

      border-radius: 30px !important;
      padding-left: 10px;
    }

    .webchat__send-box .webchat__send-box__main {
      /* position: inherit;
  
  left: 50%;
  transform: translate(50%, 0%);  */
      /* width: 50% !important; */
      background-color: #1e4e5200 !important;
      border-top: 20px !important;
      margin-bottom: 20px !important;
      margin-left: 50px !important;
      margin-right: 50px !important;
      gap: 10px !important;

    }

    .webchat__suggested-action {
      /* background: linear-gradient(to right, #62cad7, #9fcdbf, #c3c9a1, #f3dc85) !important; */
      background: #1c4c54 !important;
      color: white !important;
      font-family: 'ArticualteCustom' !important;
      font-size: large !important;
      border-width: 0 !important;
      border-radius: 15px !important;

    }

    .webchat__suggested-actions__item-box {
      position: relative;
      margin: 0 0 0 15px;
      width: 90px !important;
      height: 100%;
      /* background: linear-gradient(0deg, #000, #272727); */
    }

    .webchat__suggested-actions__item-box:before,
    .webchat__suggested-actions__item-box:after {
      content: '';
      position: absolute;
      left: 2px;
      top: 3px;
      border-radius: 15px !important;
      background: linear-gradient(45deg, #ff8220, #62cad7, #1c4c54);
      background-size: 400%;
      width: 96%;
      height: 74%;
      z-index: -1;
      animation: steam 20s linear infinite;
    }

    @keyframes steam {
      0% {
        background-position: 0 0;
      }

      50% {
        background-position: 400% 0;
      }

      100% {
        background-position: 0 0;
      }
    }

    .webchat__suggested-actions__item-box:after {
      filter: blur(3px);
    }



    .webchat__send-box-text-box {
      /* Base styles */
      border-radius: 20px;
      width: 60% !important;
      box-sizing: border-box;


      /* Customize these styles as needed */
      background-color: white;
      color: #333;
      font-size: 16px;
      font-family: 'ArticualteCustom' !important;


    }


    #webchat {
      /* crittical for position text input message */

      position: static;
      font-weight: 800 !important;
      bottom: 1000px;
      width: 100%;
      height: inherit;
      border: 0;
      border-radius: inherit;
    }

    /* HTML: <div class="loader"></div> */
    .webchat__typingIndicator {
      width: 120px;
      height: 22px;
      border-radius: 40px;
      color: #1e4e52;
      border: 2px solid;
      position: relative;
      margin-left: 10px;
    }

    .webchat__typingIndicator::before {
      content: "";
      position: absolute;
      margin: 2px;
      width: 25%;
      top: 0;
      bottom: 0;
      left: 0;
      border-radius: inherit;
      background: currentColor;
      animation: l3 1s infinite linear;
    }

    @keyframes l3 {
      50% {
        left: 100%;
        transform: translateX(calc(-100% - 4px))
      }
    }

    .webchat__stacked-layout__status {
      text-shadow: 2px 2px #1c4c54 !important;

    }

    .ac-columnSet {
      padding: 0 0 0 20px !important;
    }

    .ac-container.ac-adaptiveCard {
      background: #1e4e5230 !important;
    }
  </style>
</head>

<body>

  <div class="card">
    <div id="banner">
      <img src="https://talmaashani2016.github.io/CustomScripts/PODIA%20ICON-_-%20(1).png"
        style="float:left;width:150px;height:70px;">
      <img id="logo"
        src="https://raw.githubusercontent.com/talmaashani2016/CustomScripts/refs/heads/main/Oqbi%20Logo%20White.png">

    </div>
    <div id="webchat" role="main"></div>
  </div>

  <!--
       In this sample, the latest version of Web Chat is being used.
       In production environment, the version number should be pinned and version bump should be done frequently.

       Please visit https://github.com/microsoft/BotFramework-WebChat/tree/main/CHANGELOG.md for changelog.
     -->
  <script crossorigin="anonymous" src="https://cdn.botframework.com/botframework-webchat/latest/webchat.js"></script>

  <script>
    (async function () {
      // Specifies style options to customize the Web Chat canvas.
      // Please visit https://microsoft.github.io/BotFramework-WebChat for customization samples.
      const styleOptions = {
        // Hide upload button.
        backgroundColor: '#ffffff00',
        cardEmphasisBackgroundColor: '#F0F0F0',
        paddingRegular: 10,
        paddingWide: 10 * 2,
        subtle: '#767676',
        //send box 
        hideSendBox: false,
        hideUploadButton: true,
        microphoneButtonColorOnDictate: '#F33',
        // sendBoxBackground: undefined,
        sendBoxButtonColor: 'White',
        bubbleFromUserBackground: "#1e4e52",
        bubbleFromUserTextColor: 'White',// defaults to subtle
        sendBoxButtonColorOnDisabled: '#CCC',
        sendBoxButtonColorOnFocus: '#333',
        sendBoxButtonColorOnHover: '#333',
        sendBoxDisabledTextColor: undefined, // defaults to subtle
        sendBoxHeight: 40,
        sendBoxMaxHeight: 200,
        sendBoxTextColor: 'Black',
        sendBoxBorderBottom: '',
        sendBoxBorderLeft: '',
        // suggestedActionBorderColor: '#1e4e5280',
        suggestedActionBoarderWidth: 0,
        sendBoxBorderRight: '',
        sendBoxBorderTop: 'solid 1px #E6E6E6',
        sendBoxPlaceholderColor: undefined, // defaults to subtle
        sendBoxTextWrap: false,
        // primaryFont: ('ArticualteCustom', 'avenir'),
        // suggestedActionBorderRadius: 15,
        bubbleBorderRadius: 15,
        userAvatarInitials: 'ME',
        botAvatarInitials: '',
        botAvatarBackgroundColor: '#1e4e52',
        // suggestedActionBackgroundColor: 'White',
        suggestedActionTextColor: '#1e4e52',
        bubbleBackground: 'White',
        bubbleTextColor: '#1e4e52',
        showSpokenText: true,
        timestampColor: 'White',
        markdownRespectCRLF: false,
        bubbleFromUserBorderRadius: 15,
        userAvatarBackgroundColor: '#1e4e52',
        bubbleNubOffset: 'bottom',
        bubbleNubSize: 10,
        bubbleFromUserNubSize: 10,
        spinnerAnimationWidth: 10,


        // defaults to subtle



        avatarSize: 40,
        botAvatarImage: 'https://raw.githubusercontent.com/talmaashani2016/CustomScripts/refs/heads/main/podia%20(2).webp',





      };

      // Specifies the token endpoint URL.
      // To get this value, visit Copilot Studio > Settings > Channels > Mobile app page.
      const tokenEndpointURL = new URL('https://defaultb8ad86563bdc47ecb9b484a142b7e1.34.environment.api.powerplatform.com/powervirtualagents/botsbyschema/cr4d9_podia/directline/token?api-version=2022-03-01-preview');

      // Specifies the language the agent and Web Chat should display in:
      // - (Recommended) To match the page language, set it to document.documentElement.lang
      // - To use current user language, set it to navigator.language with a fallback language
      // - To use another language, set it to supported Unicode locale

      // Setting page language is highly recommended.
      // When page language is set, browsers will use native font for the respective language.

      const locale = document.documentElement.lang || 'en'; // Uses language specified in <html> element and fallback to English (United States).
      // const locale = navigator.language || 'ja-JP'; // Uses user preferred language and fallback to Japanese.
      // const locale = 'zh-HAnt'; // Always use Chinese (Traditional).

      const apiVersion = tokenEndpointURL.searchParams.get('api-version');


      const [directLineURL, token] = await Promise.all([
        fetch(new URL(`/powervirtualagents/regionalchannelsettings?api-version=${apiVersion}`, tokenEndpointURL))
          .then(response => {
            if (!response.ok) {
              throw new Error('Failed to retrieve regional channel settings.');
            }

            return response.json();
          })
          .then(({ channelUrlsById: { directline } }) => directline),
        fetch(tokenEndpointURL)
          .then(response => {
            if (!response.ok) {
              throw new Error('Failed to retrieve Direct Line token.');
            }

            return response.json();
          })
          .then(({ token }) => token)
      ]);

      // The "token" variable is the credentials for accessing the current conversation.
      // To maintain conversation across page navigation, save and reuse the token.

      // The token could have access to sensitive information about the user.
      // It must be treated like user password.

      const directLine = WebChat.createDirectLine({ domain: new URL('v3/directline', directLineURL), token });

      // Sends "startConversation" event when the connection is established.

      const subscription = directLine.connectionStatus$.subscribe({
        next(value) {
          if (value === 2) {
            directLine
              .postActivity({
                localTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                locale,
                name: 'startConversation',
                type: 'event'
              })
              .subscribe();

            // Only send the event once, unsubscribe after the event is sent.
            subscription.unsubscribe();
          }
        }
      });



      WebChat.renderWebChat({ directLine, locale, styleOptions }, document.getElementById('webchat'));
    })();
  </script>
</body>

</html>
