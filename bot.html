<!DOCTYPE html>
<html>

<head>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
      width: 100%;
      border-radius: 10px;


    }

    .card {
      margin: 10px 1px 1px 5px;
      /* padding: 2em; */
      height: 90%;
      width: 95%;
      background-color:white;
      /* background-image: url('https://talmaashani2016.github.io/CustomScripts/2%2012.png'); */
      text-align: center;
      border-radius: 10px;
      position: relative;
    }

    @property --angle {
      syntax: "<angle>";
      initial-value: 0deg;
      inherits: false;
    }

    .card::after,
    .card::before {
      content: '';
      position: absolute;
      height: 100%;
      width: 100%;
      background-image: conic-gradient(from var(--angle), #333, #04acbc, #1e4e52, #333);
      top: 50%;
      left: 50%;
      translate: -50% -50%;
      z-index: -1;
      padding: 3px;
      border-radius: 10px;
      animation: 3s spin linear infinite;
    }

    .card::before {
      filter: blur(1.5rem);
      /* opacity: 0.5; */
    }

    @keyframes spin {
      from {
        --angle: 0deg;
      }

      to {
        --angle: 360deg;
      }
    }



    h1 {
      color: White;
      font-family: 'ArticualteCustom' !important;
      font-size: 24px;
      line-height: 20px;
      margin: 0;
      padding: 20px 15px 15px 15px;
    }

    @font-face {
      font-family: 'ArticualteCustom';
      /* Name for your font */
      src: url('https://github.com/talmaashani2016/CustomScripts/blob/main/ArticulatCF-Medium.otf') format('otf'),
        /* Add more font formats as needed */
    }

    #banner {
      align-items: center;
      background-color:#333;
      display: flex;
      height: 50px;
      position: relative;
      padding: 15px 30px 15px 30px;
      border-radius: 8px 8px 0 0;

      /* margin: 15px 15px 15px 15px; */
    }

    #logo {
      margin-left: auto;
      /* Add margin to create space between image and text */
      max-width: 30%;
      /* Set a maximum width for the image */
      max-height: 50%;
      /* Adjust as needed */
      /* float: right; */
    }



    .react-film__filmstrip__list{
      padding-left: 30px !important;
      padding-top: 10px !important;
    }
    /* .react-film__filmstrip__list {
      padding: 0 200px 0 0 !important;
    } */
    .webchat__send-box .webchat__send-box__main {

      border-top: 0px !important;
      /* margin-bottom: 20px !important; */
      margin-left: 50px !important;
      margin-right: 50px !important;
      gap: 10px !important;

    }

    .webchat__suggested-action {
      /* background: linear-gradient(to right, #62cad7, #9fcdbf, #c3c9a1, #f3dc85) !important; */
      background: #333 !important;
      color: white !important;
      font-family: 'ArticualteCustom' !important;
      font-size: large !important;
      border-width: 0 !important;
      border-radius: 15px !important;
      border: 0px !important;



    }

    .webchat__suggested-actions__item-box {
      position: relative;
      margin: 0 0 0 15px;
      width: 90px !important;
      height: 100%;

      /* background: linear-gradient(0deg, #000, #272727); */
    }

    .webchat__suggested-actions__item-box:before,
    .webchat__suggested-actions__item-box:after {
      content: '';
      position: absolute;
      left: 2px;
      top: 3px;
      border-radius: 15px !important;
      background: linear-gradient(45deg, #333, Black,#333);
      background-size: 400%;
      width: 96%;
      height: 74%;
      z-index: -1;
      animation: steam 20s linear infinite;
    }

    @keyframes steam {
      0% {
        background-position: 0 0;
      }

      50% {
        background-position: 400% 0;
      }

      100% {
        background-position: 0 0;
      }
    }

    .webchat__suggested-actions__item-box:after {
      filter: blur(2px);
    }

    /* remove the outline aorund the chatbox */
    .webchat__basic-transcript:focus .webchat__basic-transcript__activity-indicator--focus {
  border: 0px !important;
  /* border-color: red !important;
  border-style: dotted !important; */
}
/* The whole box of text input and button */
.webchat__send-box .webchat__send-box__main {
      margin-left: 50px !important;
      margin-bottom: 50px !important;
      margin-top: 20px !important;
      margin-right: 50px !important;
      /* padding-right: 0.75erm; */
      background-color: #f7f7f7 !important;
      border-radius: 15px !important;
      width: 70% !important;
    }

    /* Text input */
    .webchat__send-box-text-box {
      /* Base styles */
      border-radius: 20px;
      /* width: 60% !important; */
      /* background-color: red !important; */
      box-sizing: border-box;
      width: 67% !important;
      position: fixed !important;


      /* Customize these styles as needed */
      color: #333;
      font-size: 16px;
      font-family: 'ArticualteCustom' !important;
    }

      /* Send Button CSS */

    .webchat__icon-button__shade {

      border-radius: 30px !important;
      padding-left: 10px !important;
      background-color: #f7f7f7 !important;

    }
 .webchat__icon-button{
            margin-left: 88% !important;
    }

    


    #webchat {
      /* crittical for position text input message */

      position: static;
      font-weight: 800 !important;
      bottom: 1000px;
      width: 100%;
      height: inherit;
      border: 0;
      border-radius: inherit;
    }

    /* HTML: <div class="loader"></div> */
    .webchat__typingIndicator {
      width: 120px;
      height: 22px;
      border-radius: 40px;
      color: #333;
      border: 2px solid;
      position: relative;
      margin-left: 10px;
    }


    .webchat__typingIndicator::before {
      content: "";
      position: absolute;
      margin: 2px;
      width: 25%;
      top: 0;
      bottom: 0;
      left: 0;
      border-radius: inherit;
      background: currentColor;
      animation: l3 1s infinite linear;
    }

    @keyframes l3 {
      50% {
        left: 100%;
        transform: translateX(calc(-100% - 4px))
      }
    }

    .webchat__stacked-layout__status {
      text-shadow: 0.5px 0.5px #04acbc !important;
      /* background-color: #04acbc; */


    }

    .ac-columnSet {
      padding: 0 0 0 20px !important;
    }

    .ac-container.ac-adaptiveCard {
      background: transparent !important;
    }

  </style>
</head>

<body>

  <div class="card">
    <div id="banner">
      <img src="https://talmaashani2016.github.io/CustomScripts/PODIA%20ICON-_-%20(1).png"
        style="float:left;width:150px;height:70px;">
      <img id="logo"
        src="https://raw.githubusercontent.com/talmaashani2016/CustomScripts/refs/heads/main/Oqbi%20Logo%20White.png">

    </div>
    <div id="webchat" role="main"></div>
  </div>

  <!--
       In this sample, the latest version of Web Chat is being used.
       In production environment, the version number should be pinned and version bump should be done frequently.

       Please visit https://github.com/microsoft/BotFramework-WebChat/tree/main/CHANGELOG.md for changelog.
     -->
  <script crossorigin="anonymous" src="https://cdn.botframework.com/botframework-webchat/latest/webchat.js"></script>

  <script>
    (async function () {
      // Specifies style options to customize the Web Chat canvas.
      // Please visit https://microsoft.github.io/BotFramework-WebChat for customization samples.
      const styleOptions = {
        // Hide upload button.
        backgroundColor: '#ffffff00',
        cardEmphasisBackgroundColor: '#F0F0F0',
        paddingRegular: 10,
        paddingWide: 10 * 2,
        subtle: '#767676',
        //send box 
        hideSendBox: false,
        hideUploadButton: true,
        microphoneButtonColorOnDictate: '#F33',
        /* sendBoxBackground: 'Red', */
        sendBoxButtonColor: '#333',
        bubbleFromUserBackground: '#f7f7f7',
        bubbleFromUserTextColor: 'Black',// defaults to subtle
        sendBoxButtonColorOnDisabled: '#CCC',
        sendBoxButtonColorOnFocus: '#333',
        sendBoxButtonColorOnHover: '#333',
        sendBoxDisabledTextColor: undefined, // defaults to subtle
        sendBoxHeight: 40,
        sendBoxMaxHeight: 200,
        sendBoxTextColor: 'Black',
        sendBoxBorderBottom: '',
        sendBoxBorderLeft: '',
        // suggestedActionBorderColor: '#1e4e5280',
        suggestedActionBoarderWidth: 0,
        sendBoxBorderRight: '',
        sendBoxBorderTop: 'solid 1px #E6E6E6',
        sendBoxPlaceholderColor: undefined, // defaults to subtle
        sendBoxTextWrap: false,
        // primaryFont: ('ArticualteCustom', 'avenir'),
        // suggestedActionBorderRadius: 15,
        bubbleBorderRadius: 15,
        userAvatarInitials: 'ME',
        botAvatarInitials: '',
        botAvatarBackgroundColor: '#000411',
        // suggestedActionBackgroundColor: 'White',
        suggestedActionTextColor: '#1e4e52',
        /* bubbleBackground: '#f7f7f7', */
        bubbleBorderWidth: 1,
        bubbleTextColor: 'Black',
        showSpokenText: true,
        timestampColor: 'Black',
        markdownRespectCRLF: false,
        bubbleFromUserBorderRadius: 15,
        userAvatarBackgroundColor: '#000411',
        bubbleNubOffset: 'bottom',
        bubbleNubSize: 10,
        bubbleFromUserNubSize: 10,
        spinnerAnimationWidth: 10,


        // defaults to subtle



        avatarSize: 40,
        botAvatarImage: 'https://raw.githubusercontent.com/talmaashani2016/CustomScripts/refs/heads/main/podia_art.png',





      };

      // Specifies the token endpoint URL.
      // To get this value, visit Copilot Studio > Settings > Channels > Mobile app page.
      const tokenEndpointURL = new URL('https://defaultb8ad86563bdc47ecb9b484a142b7e1.34.environment.api.powerplatform.com/powervirtualagents/botsbyschema/cr4d9_podia/directline/token?api-version=2022-03-01-preview');

      // Specifies the language the agent and Web Chat should display in:
      // - (Recommended) To match the page language, set it to document.documentElement.lang
      // - To use current user language, set it to navigator.language with a fallback language
      // - To use another language, set it to supported Unicode locale

      // Setting page language is highly recommended.
      // When page language is set, browsers will use native font for the respective language.

      const locale = document.documentElement.lang || 'en'; // Uses language specified in <html> element and fallback to English (United States).
      // const locale = navigator.language || 'ja-JP'; // Uses user preferred language and fallback to Japanese.
      // const locale = 'zh-HAnt'; // Always use Chinese (Traditional).

      const apiVersion = tokenEndpointURL.searchParams.get('api-version');


      const [directLineURL, token] = await Promise.all([
        fetch(new URL(`/powervirtualagents/regionalchannelsettings?api-version=${apiVersion}`, tokenEndpointURL))
          .then(response => {
            if (!response.ok) {
              throw new Error('Failed to retrieve regional channel settings.');
            }

            return response.json();
          })
          .then(({ channelUrlsById: { directline } }) => directline),
        fetch(tokenEndpointURL)
          .then(response => {
            if (!response.ok) {
              throw new Error('Failed to retrieve Direct Line token.');
            }

            return response.json();
          })
          .then(({ token }) => token)
      ]);

      // The "token" variable is the credentials for accessing the current conversation.
      // To maintain conversation across page navigation, save and reuse the token.

      // The token could have access to sensitive information about the user.
      // It must be treated like user password.

      const directLine = WebChat.createDirectLine({ domain: new URL('v3/directline', directLineURL), token });

      // Sends "startConversation" event when the connection is established.

      const subscription = directLine.connectionStatus$.subscribe({
        next(value) {
          if (value === 2) {
            directLine
              .postActivity({
                localTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                locale,
                name: 'startConversation',
                type: 'event'
              })
              .subscribe();

            // Only send the event once, unsubscribe after the event is sent.
            subscription.unsubscribe();
          }
        }
      });
      setTimeout(() => {
     const inputElements = document.getElementsByClassName('webchat__send-box-text-box__input'); 
  if (inputElements.length > 0) {
    const firstInputElement = inputElements[0]; 
    console.log(firstInputElement); // Check if the element is correct
    firstInputElement.placeholder = "Ask your question"; 
  } else {
    console.error("Placeholder...please check the code on github talmaashani2016 - OQBI IDS"); 
  }
}, 200);

setTimeout(()=> {
  const svg_image = document.getElementsByTagName('path');
  if (svg_image.length > 0) {
    const path = svg_image[7]; 
    console.log(path); // Check if the element is correct
    path.setAttribute('d', "M 31.832031 2.097656 C 31.734375 2.007812 31.609375 1.960938 31.480469 1.960938 C 31.40625 1.960938 31.328125 1.976562 31.253906 2.011719 L 0.511719 17.09375 C 0.195312 17.25 -0.00390625 17.570312 0 17.921875 C 0.00390625 18.269531 0.203125 18.589844 0.519531 18.742188 L 8.625 22.601562 L 24.824219 9.285156 L 10.632812 23.558594 L 20.726562 28.367188 C 20.847656 28.425781 20.984375 28.457031 21.117188 28.457031 C 21.234375 28.457031 21.347656 28.4375 21.453125 28.394531 C 21.6875 28.300781 21.875 28.113281 21.96875 27.878906 L 31.964844 2.667969 C 32.042969 2.46875 31.992188 2.242188 31.832031 2.097656 Z M 31.832031 2.097656 ")
    console.log(path.d)
    /*svg_image.placeholder = "Ask your question";  */
  } else {
    console.error("SVG ... please check the code on github talmaashani2016 - OQBI IDS"); 
  }
}, 500);



      WebChat.renderWebChat({ directLine, locale,styleOptions }, document.getElementById('webchat'));
    })();


 

  </script>


</body>

</html>
